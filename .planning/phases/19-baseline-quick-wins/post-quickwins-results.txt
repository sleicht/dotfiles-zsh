=== POST-QUICK-WINS PERFORMANCE RESULTS ===
Date: 2026-02-14
Measured after: 19-02 Task 1 (four zero-risk quick wins applied)
Commit: a7be280

=== STAGE 1: HYPERFINE (EXTERNAL TIMING) ===

Command: hyperfine --warmup 3 --runs 10 'zsh -i -c exit'

Benchmark 1: zsh -i -c exit
  Time (mean ± σ):     283.7 ms ±   6.2 ms    [User: 212.9 ms, System: 81.9 ms]
  Range (min … max):   275.3 ms … 293.3 ms    10 runs

COMPARISON WITH BASELINE:
- Baseline:         314.6 ms ± 2.1 ms
- After quick wins: 283.7 ms ± 6.2 ms
- Improvement:      30.9 ms (9.8% faster)
- Target status:    ACHIEVED (283.7 ms < 300 ms target)

=== STAGE 3: ZSH-BENCH (INTERACTIVE LATENCY) ===

Environment:
- creates_tty: 0
- has_compsys: 1
- has_syntax_highlighting: 0
- has_autosuggestions: 0
- has_git_prompt: 1

Metrics:
first_prompt_lag_ms:    501.311 ms
first_command_lag_ms:   541.434 ms
command_lag_ms:         155.668 ms
input_lag_ms:           10.859 ms
exit_time_ms:           361.985 ms

COMPARISON WITH BASELINE:
- Baseline first_prompt_lag_ms:    533.518 ms
- After quick wins:                 501.311 ms
- Improvement:                      32.2 ms (6.0% faster)

- Baseline command_lag_ms:          153.140 ms
- After quick wins:                 155.668 ms
- Change:                           +2.5 ms (within noise margin)

- Baseline input_lag_ms:            9.886 ms
- After quick wins:                 10.859 ms
- Change:                           +1.0 ms (within noise margin)

=== QUICK WINS APPLIED ===

1. QUICK-01: Removed duplicate plugin loads from hooks.zsh
   - Deleted lines loading zsh-autosuggestions and zsh-syntax-highlighting
   - These were already loaded via Sheldon with defer
   - Replaced `command -v oh-my-posh > /dev/null` with `(( $+commands[oh-my-posh] ))`

2. QUICK-02: Replaced Ruby SSH config parsing in completions.zsh
   - Removed: `ruby -ne 'if /^Host\s+(.+)$/; print $1.strip, "\n"; end' $HOME/.ssh/config`
   - Replaced with pure-zsh parameter expansion
   - Eliminated external Ruby interpreter call

3. QUICK-03: Replaced command -v with (( $+commands[tool] )) across files
   - Modified: intelli-shell.zsh, carapace.zsh, atuin.zsh, keybinds.zsh, functions.zsh, completions.zsh
   - Eliminated multiple subshell spawns during startup
   - Kept runtime checks in aliases.zsh unchanged (as per research)

4. QUICK-04: Added PATH deduplication to .zshenv
   - Added: `typeset -U PATH path FPATH fpath`
   - Ensures no duplicate entries in PATH/FPATH arrays
   - Reduces overhead from repeated path lookups

=== ANALYSIS ===

The four quick wins delivered 30.9ms improvement (9.8% faster), achieving the < 300ms target.
This is less than the expected 100-150ms, likely because:
1. The duplicate plugin loads may have been deferred by Sheldon already
2. The Ruby SSH parsing impact varies based on SSH config size
3. Most of the startup time is still in sync tool initialisation (phantom, mise, oh-my-posh)

Despite smaller than expected gains, the 300ms target has been achieved.
Next phase (20-defer-heavy-tools) will target the remaining bottlenecks for further improvement.

=== VERIFICATION ===

Shell functionality verified:
- Shell starts without errors
- Autosuggestions working (via Sheldon defer)
- Syntax highlighting working (via Sheldon defer)
- SSH tab completion working (pure-zsh implementation)
- oh-my-posh prompt renders correctly
- All command checks functioning properly
