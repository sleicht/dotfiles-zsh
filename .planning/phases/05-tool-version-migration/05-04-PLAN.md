---
phase: 05-tool-version-migration
plan: 04
type: execute
wave: 2
depends_on: ["05-01", "05-02"]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "User can run mise install and get all configured tools"
    - "User has all 7 managed runtimes available (node, python, go, rust, java, ruby, terraform)"
    - "User sees global versions from config when outside any project directory"
  artifacts:
    - path: "~/.local/share/mise/installs/node"
      provides: "Node.js installation directory"
    - path: "~/.local/share/mise/installs/python"
      provides: "Python installation directory"
    - path: "~/.local/share/mise/installs/go"
      provides: "Go installation directory"
    - path: "~/.local/share/mise/installs/rust"
      provides: "Rust installation directory"
  key_links:
    - from: "~/.config/mise/config.toml"
      to: "~/.local/share/mise/installs/*"
      via: "mise install"
      pattern: "installs"
---

<objective>
Install all globally-defined mise tools and verify they're working.

Purpose: Ensure all runtimes defined in the global mise config are installed and accessible, establishing the complete mise-managed development environment.

Output: All 7 runtimes (node, python, go, rust, java, ruby, terraform) installed via mise and accessible from shell.
</objective>

<execution_context>
@/Users/stephanlv_fanaka/.claude/get-shit-done/workflows/execute-plan.md
@/Users/stephanlv_fanaka/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-tool-version-migration/05-CONTEXT.md
@.planning/phases/05-tool-version-migration/05-RESEARCH.md
@.planning/phases/05-tool-version-migration/05-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install all globally-defined mise tools</name>
  <files>~/.local/share/mise/installs/*</files>
  <action>
Run mise install to install all tools defined in global config:

1. First, ensure shell has mise active (source or new terminal if needed):
   ```bash
   eval "$(mise activate zsh)"
   ```

2. Trust the global config (if prompted):
   ```bash
   mise trust ~/.config/mise/config.toml
   ```

3. Install all tools defined in global config:
   ```bash
   mise install
   ```

This will install:
- node (LTS version)
- python (3.12)
- go (1.22)
- rust (stable)
- java (liberica-25)
- ruby (3)
- terraform (1.9)

Note: Some tools may already be installed (node, java, ruby from earlier). Mise will skip already-installed versions.
  </action>
  <verify>
- `mise ls` shows all 7 tools installed
- Each tool shows an installed version
  </verify>
  <done>All 7 runtimes installed via mise</done>
</task>

<task type="auto">
  <name>Task 2: Verify all tools accessible from shell</name>
  <files>None (verification only)</files>
  <action>
Verify each tool is accessible and working:

1. Check mise current shows all tools:
   ```bash
   mise current
   ```

2. Verify each tool binary works:
   ```bash
   node --version
   python --version
   go version
   rustc --version
   java --version
   ruby --version
   terraform --version
   ```

3. Verify PATH locations point to mise:
   ```bash
   which node    # should be ~/.local/share/mise/installs/node/...
   which python  # should be ~/.local/share/mise/installs/python/...
   which go      # should be ~/.local/share/mise/installs/go/...
   which rustc   # should be ~/.local/share/mise/installs/rust/...
   which java    # should be ~/.local/share/mise/installs/java/...
   which ruby    # should be ~/.local/share/mise/installs/ruby/...
   which terraform  # should be ~/.local/share/mise/installs/terraform/...
   ```

4. Run mise doctor to verify health:
   ```bash
   mise doctor
   ```
  </action>
  <verify>
- All 7 `--version` commands succeed
- All `which` commands show mise paths
- `mise doctor` shows no errors
  </verify>
  <done>All mise-managed tools verified accessible and working</done>
</task>

<task type="auto">
  <name>Task 3: Test auto-install functionality</name>
  <files>None (verification only)</files>
  <action>
Test that auto-install works as expected:

1. Create a test directory with .tool-versions:
   ```bash
   mkdir -p /tmp/mise-test
   cd /tmp/mise-test
   echo "node 20" > .tool-versions
   ```

2. Verify mise detects the local version:
   ```bash
   mise current  # should show node 20.x.x (may trigger install)
   ```

3. If node 20 wasn't installed, verify auto-install worked:
   ```bash
   node --version  # should show 20.x.x
   ```

4. Verify switching back to global version:
   ```bash
   cd ~
   mise current  # should show node lts (global config)
   ```

5. Clean up test directory:
   ```bash
   rm -rf /tmp/mise-test
   ```
  </action>
  <verify>
- Auto-install triggered when entering directory with different version
- Version correctly switches based on .tool-versions
- Returns to global version when leaving directory
  </verify>
  <done>Auto-install and directory-based version switching working</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. All tools installed:
   - `mise ls` shows node, python, go, rust, java, ruby, terraform
   - Each has at least one installed version

2. Tools accessible:
   - All `--version` commands work
   - All `which` commands show mise paths

3. Auto-install working:
   - Entering directory with .tool-versions triggers install
   - Version switches correctly
   - Global version restored on exit

4. Health check:
   - `mise doctor` shows no errors
</verification>

<success_criteria>
- 7 runtimes installed: node, python, go, rust, java, ruby, terraform
- All tools accessible via PATH (version commands work)
- All `which` commands show ~/.local/share/mise/installs/ paths
- Auto-install works when entering project with .tool-versions
- `mise doctor` passes
</success_criteria>

<output>
After completion, create `.planning/phases/05-tool-version-migration/05-04-SUMMARY.md`
</output>
