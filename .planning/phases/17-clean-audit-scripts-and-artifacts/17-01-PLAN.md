---
phase: 17-clean-audit-scripts-and-artifacts
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .gitignore
  - scripts/audit-gitleaks.toml
  - scripts/audit-secrets.sh
autonomous: true

must_haves:
  truths:
    - "Repository contains no empty bin/ directory"
    - "Repository contains no logs/ directory"
    - "firebase-debug.log is gitignored and not tracked"
    - "audit-gitleaks.toml contains no references to dotbot, dotbot-asdf, dotbot-brew, or zgenom directories"
    - "audit-secrets.sh contains no references to dotbot, dotbot-asdf, or dotbot-brew directories"
  artifacts:
    - path: ".gitignore"
      provides: "firebase-debug.log and logs/ exclusion"
      contains: "firebase-debug.log"
    - path: "scripts/audit-gitleaks.toml"
      provides: "Allowlist without stale directory references"
    - path: "scripts/audit-secrets.sh"
      provides: "Exclude globs without stale directory references"
  key_links: []
---

<objective>
Remove stale directories and fix audit script references to retired dotbot/zgenom directories.

Purpose: Final cleanup of pre-chezmoi artifacts so the repository reflects reality. Completes the v1.2 Legacy Cleanup milestone.
Output: Clean repository with no empty directories, no stale log files, and audit scripts that reference only existing directories.
</objective>

<execution_context>
@/Users/stephanlv_fanaka/.claude/get-shit-done/workflows/execute-plan.md
@/Users/stephanlv_fanaka/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove stale directories/files and update .gitignore</name>
  <files>.gitignore</files>
  <action>
1. Remove the empty `bin/` directory: `rm -rf bin/`
2. Remove the `logs/` directory (contains combined.log, error.log, interactions.log — all untracked): `rm -rf logs/`
3. Remove `firebase-debug.log` (untracked, 70KB): `rm -f firebase-debug.log`
4. Add entries to `.gitignore` to prevent re-creation. Append after the existing `Brewfile*` line:

```
# Firebase debug logs
firebase-debug.log

# Log files directory
logs/

# Empty bin directory
bin/
```

Verify none of these paths are git-tracked before removing (they are all untracked currently).
  </action>
  <verify>
- `test ! -d bin/` — bin/ does not exist
- `test ! -d logs/` — logs/ does not exist
- `test ! -f firebase-debug.log` — firebase-debug.log does not exist
- `grep -q 'firebase-debug.log' .gitignore` — entry exists in .gitignore
- `grep -q 'logs/' .gitignore` — entry exists in .gitignore
- `grep -q 'bin/' .gitignore` — entry exists in .gitignore
  </verify>
  <done>bin/, logs/, and firebase-debug.log are removed; .gitignore prevents re-creation</done>
</task>

<task type="auto">
  <name>Task 2: Remove stale directory references from audit scripts</name>
  <files>scripts/audit-gitleaks.toml, scripts/audit-secrets.sh</files>
  <action>
**audit-gitleaks.toml:**

1. Remove these 4 lines from the `[allowlist]` paths array (lines 69-72):
   - `'''dotbot/'''`
   - `'''dotbot-asdf/'''`
   - `'''dotbot-brew/'''`
   - `'''zgenom/'''`

These directories were removed in Phase 12 (Dotbot retirement) and Phase 13 (legacy cleanup). Keeping them in the allowlist is harmless but misleading.

2. Update the header comment (lines 4-5) — change "BEFORE configs are migrated to chezmoi" to "after migration to chezmoi" since migration is complete. Replace:
   `# Used by scripts/audit-secrets.sh to scan the dotfiles-zsh repo BEFORE`
   `# configs are migrated to chezmoi.`
   with:
   `# Used by scripts/audit-secrets.sh to scan the dotfiles-zsh repo for`
   `# secrets and portability issues.`

**audit-secrets.sh:**

1. Remove these 3 lines from the `exclude_args` array (lines 115-117):
   - `--glob '!dotbot/'`
   - `--glob '!dotbot-asdf/'`
   - `--glob '!dotbot-brew/'`

2. Update the header comment (line 6) — change "BEFORE they are migrated to chezmoi" to reflect current state. Replace:
   `# Scans ALL config files in the dotfiles-zsh repo for secrets, PII, and`
   `# portability issues BEFORE they are migrated to chezmoi.`
   with:
   `# Scans ALL config files in the dotfiles-zsh repo for secrets, PII, and`
   `# portability issues.`

Do NOT change any other lines in either file.
  </action>
  <verify>
- `grep -c 'dotbot' scripts/audit-gitleaks.toml` returns 0
- `grep -c 'zgenom' scripts/audit-gitleaks.toml` returns 0
- `grep -c 'dotbot' scripts/audit-secrets.sh` returns 0
- `grep -q 'allowlist' scripts/audit-gitleaks.toml` — allowlist section still exists
- The toml and sh files are syntactically valid (toml can be checked by gitleaks, sh by bash -n)
  </verify>
  <done>audit-gitleaks.toml has no dotbot/zgenom references; audit-secrets.sh has no dotbot references; both files have updated header comments</done>
</task>

</tasks>

<verification>
1. `test ! -d bin/ && test ! -d logs/ && test ! -f firebase-debug.log` — all stale paths removed
2. `grep -q 'firebase-debug.log' .gitignore` — gitignore updated
3. `grep -c 'dotbot\|zgenom' scripts/audit-gitleaks.toml` returns 0
4. `grep -c 'dotbot' scripts/audit-secrets.sh` returns 0
5. `bash -n scripts/audit-secrets.sh` — script is syntactically valid
</verification>

<success_criteria>
- Repository contains no empty bin/ or logs/ directories
- firebase-debug.log is removed and gitignored
- audit-gitleaks.toml allowlist contains no references to dotbot, dotbot-asdf, dotbot-brew, or zgenom
- audit-secrets.sh exclude list contains no references to dotbot, dotbot-asdf, or dotbot-brew
- Both audit scripts remain syntactically valid
</success_criteria>

<output>
After completion, create `.planning/phases/17-clean-audit-scripts-and-artifacts/17-01-SUMMARY.md`
</output>
